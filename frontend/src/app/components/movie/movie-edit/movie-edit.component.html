<div class="container-fluid">
  <div class="row">
    <div class="col-md-7 col-lg-8 my-3">
      <!--      formulario-->
      <h2 class="display-4 py-3 text-center">Formulario para editar</h2>
      <ng-form [formGroup]="formMovie" (ngSubmit)="addMovie()">

        <!--float para titulo-->
        <div class="form-floating mb-3">
          <input type="text"
                 formControlName="title"
                 class="form-control"
                 id="title"
                 placeholder="title">
          <label for="title">Title</label>
        </div>
        <!--float para year-->
        <div class="form-floating mb-3">
          <input type="number"
                 formControlName="year"
                 class="form-control"
                 id="year"
                 placeholder="year">
          <label for="year">Year</label>
        </div>
        <!--float para director-->
        <div class="form-floating mb-3">
          <input type="text"
                 formControlName="director"
                 class="form-control"
                 id="director"
                 placeholder="Director">
          <label for="director">Director</label>
        </div>
        <!--float para plot-->
        <div class="form-floating mb-3">
          <input type="text"
                 formControlName="plot"
                 class="form-control"
                 id="plot"
                 placeholder="plot">
          <label for="plot">Plot</label>
        </div>
        <!--float para plot-->
        <div class="form-floating mb-3">
          <input type="text"
                 formControlName="poster"
                 class="form-control"
                 id="poster"
                 placeholder="poster">
          <label for="poster">Poster</label>
        </div>
        <!--float para genres-->
        <!--        componente para seleccionar generos-->
        <div class="mb-3">
          <label for="genres">Genres</label>
          <select class="form-select"
                  id="genres"
                  multiple
                  formControlName="genres"
                  [attr.size]="genres.value?.length">
            @for (genero of genres.value; track $index) {
              <option value="{{genero}}">{{ genero }}</option>
            }
          </select>
        </div>
        <!--        agregar nuevos generos-->
        <div class="row mt-3">
          <div class="col-8">
            <div [formGroup]="myNewGenres" class="form-floating mb-3" ]>
              <input type="text"
                     formControlName="newGenre"
                     class="form-control"
                     placeholder="New Genre"
                     id="newGenre">
              <label for="newGenre">Add New Genre</label>
            </div>
          </div>
          <div class="col-4">
            <button class="btn btn-outline-primary w-100"
                    type="button"
                    (click)="addNewGenre()"
            >Add New Genre
            </button>
          </div>
        </div>


        <!--float para rating-->
        <div formGroupName="imdb">
          <div class="form-floating mb-3">
            <input type="number"
                   formControlName="rating"
                   class="form-control"
                   id="rating"
                   placeholder="rating">
            <label for="title">Rating</label>
          </div>
          <!--float para votes-->
          <div class="form-floating mb-3">
            <input type="number"
                   formControlName="votes"
                   class="form-control"
                   id="Votes"
                   placeholder="votes">
            <label for="title">Votes</label>
          </div>
        </div>

        <div class="d-flex justify-content-center">
          <button type="submit"
                  class="btn btn-success w-50"
                  (click)="addMovie()"
          >
            {{editar? 'Actualizar Pelicula' : 'Agregar Nueva Pel√≠cula'}}
          </button>

        </div>

      </ng-form>


    </div>
    <div class="col-md-1">
      <!--      funcionara como espaciador-->
    </div>
    <div class="col-md-3 col-lg-3 my-3">
      <!--      card para vista previa de la pelicula-->
      <div class="card">
        <div class="card-header text-center">
          <div class="card-title">
            <h5>{{ title.value ? title.value : 'No Title' }}</h5>
            <p class="card-subtitle">{{ director.value ? director.value : 'Add director' }}</p>
          </div>
        </div>
        <img class="card-img"
             [src]="poster.value ? poster.value : 'https://thumbs.dreamstime.com/b/image-not-available-icon-vector-set-white-background-eps-330821927.jpg'"
             alt="{{title.value ? title.value : 'New Title'}}">
        <div class="card-body">
          <p class="card-text">
            {{ plot.value ? plot.value : 'No Plot Available' }}
          </p>
        </div>
        <div class="card-footer">
          <div class="d-flex justify-content-between align-items-center flex-column">
            <div class="text-muted  mb-2">
              {{ year.value ? year.value : 'Not Specified' }}
            </div>
            <div class="d-flex flex-wrap">
              @if (genres.value) {
                @for (genero of genres.value; track $index) {
                  <span class="badge text-bg-primary">{{ genero }}</span>
                }
              }
            </div>
          </div>
          <div class="d-flex flex-column py-3">
            <div class="muted">
              <h6>
                Rating: {{ rating.value ? rating.value : '0' }}
              </h6>
              <h6>
                Votes: {{ votes.value ? votes.value : '0' }}
              </h6>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
